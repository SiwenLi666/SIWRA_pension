2025-05-03 00:52:07,661 INFO main: Starting server on localhost:9090
2025-05-03 00:52:07,745 INFO main:  Starting system initialization...
2025-05-03 00:52:07,746 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 00:52:07,747 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 00:52:07,748 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 00:52:07,749 INFO main:  Creating new cost tracking database...
2025-05-03 00:52:07,749 INFO main:  System initialization completed successfully
2025-05-03 01:51:29,639 INFO main:  Shutting down system...
2025-05-03 02:52:11,178 INFO main: Starting server on localhost:9090
2025-05-03 02:52:11,238 INFO main:  Starting system initialization...
2025-05-03 02:52:11,240 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 02:52:11,241 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 02:52:11,243 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 02:52:11,243 INFO main:  Creating new cost tracking database...
2025-05-03 02:52:11,244 INFO main:  System initialization completed successfully
2025-05-03 02:52:27,192 INFO main: Received message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 02:52:27,193 INFO main: Session ID: ::1
2025-05-03 02:52:27,193 INFO main: Creating new LangGraph session for ::1
2025-05-03 02:52:27,200 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-03 02:52:27,619 INFO main: Processing message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 02:52:27,624 INFO src.graph.pension_graph: Processing question: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 02:52:27,624 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 02:52:27,625 INFO agent_logger: [AGENT] Received question: 'hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?'
2025-05-03 02:52:27,626 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-03 02:52:27,626 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-03 02:52:27,627 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-03 02:52:27,628 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 02:52:27,630 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 02:52:27,630 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 02:52:27,633 INFO calculator_logger: ğŸ§¹ Loggen har rensats fÃ¶r en ny berÃ¤kning.
2025-05-03 02:52:27,634 INFO calculator_logger: BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0
2025-05-03 02:52:27,636 INFO calculator_logger: AvsÃ¤ttning: 4.5% av 65000 = 2925.0, 30.0% av 0 = 0.0
2025-05-03 02:52:27,636 INFO calculator_logger: LÃ¶nevÃ¤xlingspremie: 0 * 0.0% = 0
2025-05-03 02:52:27,637 INFO calculator_logger: Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00
2025-05-03 02:52:27,637 INFO calculator_logger: Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64
2025-05-03 02:52:27,637 INFO calculator_logger: Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46
2025-05-03 02:52:27,638 INFO calculator_logger: Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46
2025-05-03 02:52:27,638 INFO calculator_logger: Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27
2025-05-03 02:52:27,638 INFO calculator_logger: Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54
2025-05-03 02:52:27,639 INFO calculator_logger: Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93
2025-05-03 02:52:27,639 INFO calculator_logger: Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10
2025-05-03 02:52:27,639 INFO calculator_logger: Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73
2025-05-03 02:52:27,640 INFO calculator_logger: Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47
2025-05-03 02:52:27,640 INFO calculator_logger: Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02
2025-05-03 02:52:27,641 INFO calculator_logger: Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06
2025-05-03 02:52:27,641 INFO calculator_logger: Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29
2025-05-03 02:52:27,642 INFO calculator_logger: Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39
2025-05-03 02:52:27,642 INFO calculator_logger: Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08
2025-05-03 02:52:27,642 INFO calculator_logger: Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07
2025-05-03 02:52:27,643 INFO calculator_logger: Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07
2025-05-03 02:52:27,643 INFO calculator_logger: Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80
2025-05-03 02:52:27,644 INFO calculator_logger: Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98
2025-05-03 02:52:27,644 INFO calculator_logger: Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35
2025-05-03 02:52:27,644 INFO calculator_logger: Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64
2025-05-03 02:52:27,645 INFO calculator_logger: Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59
2025-05-03 02:52:27,645 INFO calculator_logger: Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95
2025-05-03 02:52:27,645 INFO calculator_logger: Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47
2025-05-03 02:52:27,646 INFO calculator_logger: Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90
2025-05-03 02:52:27,646 INFO calculator_logger: Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00
2025-05-03 02:52:27,646 INFO calculator_logger: Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08
2025-05-03 02:52:27,647 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 1110018 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 2925 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 4625, 'total_pension': 1110018, 'monthly_contribution': 2925, 'years_to_pension': 25}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 02:52:27,650 INFO main: Final state from LangGraph: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 1110018 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 2925 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 4625, 'total_pension': 1110018, 'monthly_contribution': 2925, 'years_to_pension': 25}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 02:52:27,652 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-03 02:52:27,653 INFO main: Cleaned response: Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs ...
2025-05-03 02:52:27,653 INFO main: [chat endpoint] Final response: 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 1110018 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 2925 kr/mÃ¥n under 25 Ã¥r.'
2025-05-03 02:52:44,708 INFO main: Received message: hur rÃ¤knade du?
2025-05-03 02:52:44,709 INFO main: Session ID: ::1
2025-05-03 02:52:44,712 INFO main: Processing message: hur rÃ¤knade du?
2025-05-03 02:52:44,713 INFO src.graph.pension_graph: Processing question: hur rÃ¤knade du?
2025-05-03 02:52:44,714 INFO agent_logger: [AGENT] Start process. State: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 02:52:44,714 INFO agent_logger: [AGENT] Received question: 'hur rÃ¤knade du?'
2025-05-03 02:52:44,726 INFO agent_logger: [AGENT] Final state to return (calculation log fallback): {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ’° AvsÃ¤ttning: 4.5% av 65000 = 2925.0, 30.0% av 0 = 0.0\nğŸ“… Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00\nğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64\nğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46\nğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46\nğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27\nğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54\nğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93\nğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10\nğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73\nğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47\nğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02\nğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06\nğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29\nğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39\nğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08\nğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07\nğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07\nğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80\nğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98\nğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35\nğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64\nğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59\nğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95\nğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47\nğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90\nğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00\nğŸ“¦ Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08'}
2025-05-03 02:52:44,729 INFO main: Final state from LangGraph: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ’° AvsÃ¤ttning: 4.5% av 65000 = 2925.0, 30.0% av 0 = 0.0\nğŸ“… Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00\nğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64\nğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46\nğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46\nğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27\nğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54\nğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93\nğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10\nğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73\nğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47\nğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02\nğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06\nğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29\nğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39\nğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08\nğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07\nğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07\nğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80\nğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98\nğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35\nğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64\nğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59\nğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95\nğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47\nğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90\nğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00\nğŸ“¦ Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08'}
2025-05-03 02:52:44,731 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'response']
2025-05-03 02:52:44,732 INFO main: Cleaned response: HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:

ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65,...
2025-05-03 02:52:44,732 INFO main: [chat endpoint] Final response: 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ’° AvsÃ¤ttning: 4.5% av 65000 = 2925.0, 30.0% av 0 = 0.0\nğŸ“… Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00\nğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64\nğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46\nğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46\nğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27\nğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54\nğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93\nğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10\nğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73\nğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47\nğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02\nğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06\nğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29\nğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39\nğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08\nğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07\nğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07\nğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80\nğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98\nğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35\nğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64\nğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59\nğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95\nğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47\nğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90\nğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00\nğŸ“¦ Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08'
2025-05-03 02:57:22,783 INFO main:  Shutting down system...
2025-05-03 02:57:29,082 INFO main: Starting server on localhost:9090
2025-05-03 02:57:29,151 INFO main:  Starting system initialization...
2025-05-03 02:57:29,153 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 02:57:29,154 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 02:57:29,155 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 02:57:29,156 INFO main:  Creating new cost tracking database...
2025-05-03 02:57:29,156 INFO main:  System initialization completed successfully
2025-05-03 02:57:45,785 INFO main: Received message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 02:57:45,786 INFO main: Session ID: ::1
2025-05-03 02:57:45,787 INFO main: Creating new LangGraph session for ::1
2025-05-03 02:57:45,794 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-03 02:57:46,272 INFO main: Processing message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 02:57:46,276 INFO src.graph.pension_graph: Processing question: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 02:57:46,277 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 02:57:46,277 INFO agent_logger: [AGENT] Received question: 'hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?'
2025-05-03 02:57:46,278 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-03 02:57:46,278 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-03 02:57:46,279 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-03 02:57:46,280 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 02:57:46,281 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 02:57:46,282 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 02:57:46,283 INFO calculator_logger: ğŸ§¹ Loggen har rensats fÃ¶r en ny berÃ¤kning.
2025-05-03 02:57:46,284 INFO calculator_logger: BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0
2025-05-03 02:57:46,285 INFO calculator_logger: AvsÃ¤ttning: 4.5% av 780000 = 35100.0, 30.0% av 0 = 0.0
2025-05-03 02:57:46,285 INFO calculator_logger: LÃ¶nevÃ¤xlingspremie: 0 * 0.0% = 0
2025-05-03 02:57:46,286 INFO calculator_logger: Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00
2025-05-03 02:57:46,286 INFO calculator_logger: Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64
2025-05-03 02:57:46,286 INFO calculator_logger: Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46
2025-05-03 02:57:46,286 INFO calculator_logger: Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46
2025-05-03 02:57:46,287 INFO calculator_logger: Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27
2025-05-03 02:57:46,287 INFO calculator_logger: Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54
2025-05-03 02:57:46,287 INFO calculator_logger: Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93
2025-05-03 02:57:46,288 INFO calculator_logger: Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10
2025-05-03 02:57:46,288 INFO calculator_logger: Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73
2025-05-03 02:57:46,288 INFO calculator_logger: Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47
2025-05-03 02:57:46,288 INFO calculator_logger: Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02
2025-05-03 02:57:46,289 INFO calculator_logger: Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06
2025-05-03 02:57:46,289 INFO calculator_logger: Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29
2025-05-03 02:57:46,289 INFO calculator_logger: Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39
2025-05-03 02:57:46,290 INFO calculator_logger: Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08
2025-05-03 02:57:46,290 INFO calculator_logger: Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07
2025-05-03 02:57:46,290 INFO calculator_logger: Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07
2025-05-03 02:57:46,300 INFO calculator_logger: Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80
2025-05-03 02:57:46,301 INFO calculator_logger: Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98
2025-05-03 02:57:46,301 INFO calculator_logger: Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35
2025-05-03 02:57:46,301 INFO calculator_logger: Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64
2025-05-03 02:57:46,302 INFO calculator_logger: Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59
2025-05-03 02:57:46,302 INFO calculator_logger: Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95
2025-05-03 02:57:46,302 INFO calculator_logger: Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47
2025-05-03 02:57:46,303 INFO calculator_logger: Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90
2025-05-03 02:57:46,303 INFO calculator_logger: Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00
2025-05-03 02:57:46,303 INFO calculator_logger: Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08
2025-05-03 02:57:46,304 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 1110018 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 2925 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 4625, 'total_pension': 1110018, 'monthly_contribution': 2925, 'years_to_pension': 25}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 02:57:46,306 INFO main: Final state from LangGraph: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 1110018 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 2925 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 4625, 'total_pension': 1110018, 'monthly_contribution': 2925, 'years_to_pension': 25}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 02:57:46,308 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-03 02:57:46,309 INFO main: Cleaned response: Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs ...
2025-05-03 02:57:46,309 INFO main: [chat endpoint] Final response: 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 4625 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 1110018 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 2925 kr/mÃ¥n under 25 Ã¥r.'
2025-05-03 02:57:53,934 INFO main: Received message: hur rÃ¤knade du?
2025-05-03 02:57:53,935 INFO main: Session ID: ::1
2025-05-03 02:57:53,939 INFO main: Processing message: hur rÃ¤knade du?
2025-05-03 02:57:53,940 INFO src.graph.pension_graph: Processing question: hur rÃ¤knade du?
2025-05-03 02:57:53,941 INFO agent_logger: [AGENT] Start process. State: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 02:57:53,941 INFO agent_logger: [AGENT] Received question: 'hur rÃ¤knade du?'
2025-05-03 02:57:53,942 INFO agent_logger: [AGENT] Final state to return (calculation log fallback): {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ’° AvsÃ¤ttning: 4.5% av 780000 = 35100.0, 30.0% av 0 = 0.0\nğŸ“… Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00\nğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64\nğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46\nğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46\nğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27\nğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54\nğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93\nğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10\nğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73\nğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47\nğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02\nğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06\nğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29\nğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39\nğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08\nğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07\nğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07\nğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80\nğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98\nğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35\nğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64\nğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59\nğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95\nğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47\nğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90\nğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00\nğŸ“¦ Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08'}
2025-05-03 02:57:53,951 INFO main: Final state from LangGraph: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ’° AvsÃ¤ttning: 4.5% av 780000 = 35100.0, 30.0% av 0 = 0.0\nğŸ“… Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00\nğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64\nğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46\nğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46\nğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27\nğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54\nğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93\nğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10\nğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73\nğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47\nğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02\nğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06\nğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29\nğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39\nğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08\nğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07\nğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07\nğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80\nğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98\nğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35\nğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64\nğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59\nğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95\nğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47\nğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90\nğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00\nğŸ“¦ Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08'}
2025-05-03 02:57:53,953 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'response']
2025-05-03 02:57:53,953 INFO main: Cleaned response: HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:

ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65,...
2025-05-03 02:57:53,954 INFO main: [chat endpoint] Final response: 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ’° AvsÃ¤ttning: 4.5% av 780000 = 35100.0, 30.0% av 0 = 0.0\nğŸ“… Ã…rlig avsÃ¤ttning = 35100.0, mÃ¥natlig = 2925.00\nğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 55142.64\nğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 54114.46\nğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 53105.46\nğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 52115.27\nğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 51143.54\nğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 50189.93\nğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 49254.10\nğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 48335.73\nğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 47434.47\nğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 46550.02\nğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 45682.06\nğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 44830.29\nğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 43994.39\nğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 43174.08\nğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 42369.07\nğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 41579.07\nğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 40803.80\nğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 40042.98\nğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 39296.35\nğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 38563.64\nğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 37844.59\nğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 37138.95\nğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 36446.47\nğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 35766.90\nğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 35100.00\nğŸ“¦ Totalt kapital med tillvÃ¤xt = 1110018.28, mÃ¥natlig pension = 4625.08'
2025-05-03 03:03:16,371 INFO main:  Shutting down system...
2025-05-03 03:03:23,249 INFO main: Starting server on localhost:9090
2025-05-03 03:03:23,308 INFO main:  Starting system initialization...
2025-05-03 03:03:23,309 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 03:03:23,310 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 03:03:23,311 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 03:03:23,312 INFO main:  Creating new cost tracking database...
2025-05-03 03:03:23,312 INFO main:  System initialization completed successfully
2025-05-03 03:03:36,530 INFO main: Received message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 03:03:36,531 INFO main: Session ID: ::1
2025-05-03 03:03:36,531 INFO main: Creating new LangGraph session for ::1
2025-05-03 03:03:36,538 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-03 03:03:36,955 INFO main: Processing message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 03:03:36,958 INFO src.graph.pension_graph: Processing question: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 03:03:36,959 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 03:03:36,959 INFO agent_logger: [AGENT] Received question: 'hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?'
2025-05-03 03:03:36,960 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-03 03:03:36,960 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-03 03:03:36,961 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-03 03:03:36,962 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 03:03:36,964 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 03:03:36,965 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 03:03:36,967 INFO calculator_logger: ğŸ§¹ Loggen har rensats fÃ¶r en ny berÃ¤kning.
2025-05-03 03:03:36,971 INFO calculator_logger: ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0
2025-05-03 03:03:36,972 INFO calculator_logger: ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0
2025-05-03 03:03:36,972 INFO calculator_logger: ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00
2025-05-03 03:03:36,973 INFO calculator_logger: ğŸ’° LÃ¶nevÃ¤xlingspremie: 0 * 0.0% = 0
2025-05-03 03:03:36,973 INFO calculator_logger: ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25
2025-05-03 03:03:36,974 INFO calculator_logger: ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64
2025-05-03 03:03:36,974 INFO calculator_logger: ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80
2025-05-03 03:03:36,974 INFO calculator_logger: ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46
2025-05-03 03:03:36,975 INFO calculator_logger: ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69
2025-05-03 03:03:36,975 INFO calculator_logger: ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56
2025-05-03 03:03:36,976 INFO calculator_logger: ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17
2025-05-03 03:03:36,976 INFO calculator_logger: ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62
2025-05-03 03:03:36,976 INFO calculator_logger: ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05
2025-05-03 03:03:36,977 INFO calculator_logger: ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59
2025-05-03 03:03:36,977 INFO calculator_logger: ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40
2025-05-03 03:03:36,977 INFO calculator_logger: ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66
2025-05-03 03:03:36,978 INFO calculator_logger: ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56
2025-05-03 03:03:36,978 INFO calculator_logger: ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30
2025-05-03 03:03:36,979 INFO calculator_logger: ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11
2025-05-03 03:03:36,979 INFO calculator_logger: ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21
2025-05-03 03:03:36,979 INFO calculator_logger: ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86
2025-05-03 03:03:36,980 INFO calculator_logger: ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31
2025-05-03 03:03:36,980 INFO calculator_logger: ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85
2025-05-03 03:03:36,980 INFO calculator_logger: ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77
2025-05-03 03:03:36,981 INFO calculator_logger: ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36
2025-05-03 03:03:36,982 INFO calculator_logger: ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95
2025-05-03 03:03:36,982 INFO calculator_logger: ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86
2025-05-03 03:03:36,983 INFO calculator_logger: ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43
2025-05-03 03:03:36,983 INFO calculator_logger: ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02
2025-05-03 03:03:36,984 INFO calculator_logger: ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00
2025-05-03 03:03:36,984 INFO calculator_logger: ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30
2025-05-03 03:03:36,985 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 12185, 'total_pension': 2924471, 'monthly_contribution': 7706, 'years_to_pension': 25, 'breakdown': {'below_cap_amount': 555000, 'above_cap_amount': 225000, 'contrib_below': 24975, 'contrib_above': 67500, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 03:03:36,988 INFO main: Final state from LangGraph: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 12185, 'total_pension': 2924471, 'monthly_contribution': 7706, 'years_to_pension': 25, 'breakdown': {'below_cap_amount': 555000, 'above_cap_amount': 225000, 'contrib_below': 24975, 'contrib_above': 67500, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 03:03:36,990 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-03 03:03:36,991 INFO main: Cleaned response: Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs...
2025-05-03 03:03:36,991 INFO main: [chat endpoint] Final response: 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.'
2025-05-03 03:03:55,165 INFO main: Received message: hur rÃ¤knade du?
2025-05-03 03:03:55,165 INFO main: Session ID: ::1
2025-05-03 03:03:55,170 INFO main: Processing message: hur rÃ¤knade du?
2025-05-03 03:03:55,172 INFO src.graph.pension_graph: Processing question: hur rÃ¤knade du?
2025-05-03 03:03:55,173 INFO agent_logger: [AGENT] Start process. State: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 03:03:55,173 INFO agent_logger: [AGENT] Received question: 'hur rÃ¤knade du?'
2025-05-03 03:03:55,174 INFO agent_logger: [AGENT] Final state to return (calculation log fallback): {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ”¢ ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0\nğŸ’° ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00\nğŸ“… ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25\nğŸ“ˆ ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64\nğŸ“ˆ ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80\nğŸ“ˆ ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46\nğŸ“ˆ ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69\nğŸ“ˆ ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56\nğŸ“ˆ ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17\nğŸ“ˆ ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62\nğŸ“ˆ ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05\nğŸ“ˆ ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59\nğŸ“ˆ ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40\nğŸ“ˆ ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66\nğŸ“ˆ ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56\nğŸ“ˆ ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30\nğŸ“ˆ ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11\nğŸ“ˆ ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21\nğŸ“ˆ ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86\nğŸ“ˆ ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31\nğŸ“ˆ ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85\nğŸ“ˆ ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77\nğŸ“ˆ ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36\nğŸ“ˆ ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95\nğŸ“ˆ ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86\nğŸ“ˆ ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43\nğŸ“ˆ ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02\nğŸ“ˆ ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00\nğŸ“¦ ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30'}
2025-05-03 03:03:55,179 INFO main: Final state from LangGraph: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ”¢ ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0\nğŸ’° ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00\nğŸ“… ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25\nğŸ“ˆ ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64\nğŸ“ˆ ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80\nğŸ“ˆ ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46\nğŸ“ˆ ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69\nğŸ“ˆ ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56\nğŸ“ˆ ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17\nğŸ“ˆ ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62\nğŸ“ˆ ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05\nğŸ“ˆ ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59\nğŸ“ˆ ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40\nğŸ“ˆ ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66\nğŸ“ˆ ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56\nğŸ“ˆ ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30\nğŸ“ˆ ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11\nğŸ“ˆ ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21\nğŸ“ˆ ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86\nğŸ“ˆ ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31\nğŸ“ˆ ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85\nğŸ“ˆ ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77\nğŸ“ˆ ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36\nğŸ“ˆ ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95\nğŸ“ˆ ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86\nğŸ“ˆ ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43\nğŸ“ˆ ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02\nğŸ“ˆ ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00\nğŸ“¦ ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30'}
2025-05-03 03:03:55,182 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'response']
2025-05-03 03:03:55,182 INFO main: Cleaned response: HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:

ğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=6...
2025-05-03 03:03:55,183 INFO main: [chat endpoint] Final response: 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ”¢ ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0\nğŸ’° ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00\nğŸ“… ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25\nğŸ“ˆ ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64\nğŸ“ˆ ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80\nğŸ“ˆ ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46\nğŸ“ˆ ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69\nğŸ“ˆ ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56\nğŸ“ˆ ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17\nğŸ“ˆ ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62\nğŸ“ˆ ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05\nğŸ“ˆ ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59\nğŸ“ˆ ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40\nğŸ“ˆ ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66\nğŸ“ˆ ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56\nğŸ“ˆ ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30\nğŸ“ˆ ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11\nğŸ“ˆ ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21\nğŸ“ˆ ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86\nğŸ“ˆ ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31\nğŸ“ˆ ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85\nğŸ“ˆ ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77\nğŸ“ˆ ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36\nğŸ“ˆ ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95\nğŸ“ˆ ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86\nğŸ“ˆ ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43\nğŸ“ˆ ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02\nğŸ“ˆ ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00\nğŸ“¦ ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30'
2025-05-03 03:05:01,946 INFO main: Received message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 03:05:01,947 INFO main: Session ID: ::1
2025-05-03 03:05:01,949 INFO main: Processing message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 03:05:01,950 INFO src.graph.pension_graph: Processing question: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 03:05:01,951 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 03:05:01,952 INFO agent_logger: [AGENT] Received question: 'hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?'
2025-05-03 03:05:01,952 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-03 03:05:01,952 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-03 03:05:01,953 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-03 03:05:01,953 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 03:05:01,954 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 03:05:01,954 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 03:05:01,956 INFO calculator_logger: ğŸ§¹ Loggen har rensats fÃ¶r en ny berÃ¤kning.
2025-05-03 03:05:01,956 INFO calculator_logger: ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0
2025-05-03 03:05:01,957 INFO calculator_logger: ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0
2025-05-03 03:05:01,958 INFO calculator_logger: ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00
2025-05-03 03:05:01,958 INFO calculator_logger: ğŸ’° LÃ¶nevÃ¤xlingspremie: 0 * 0.0% = 0
2025-05-03 03:05:01,959 INFO calculator_logger: ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25
2025-05-03 03:05:01,960 INFO calculator_logger: ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64
2025-05-03 03:05:01,960 INFO calculator_logger: ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80
2025-05-03 03:05:01,960 INFO calculator_logger: ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46
2025-05-03 03:05:01,961 INFO calculator_logger: ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69
2025-05-03 03:05:01,961 INFO calculator_logger: ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56
2025-05-03 03:05:01,962 INFO calculator_logger: ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17
2025-05-03 03:05:01,962 INFO calculator_logger: ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62
2025-05-03 03:05:01,963 INFO calculator_logger: ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05
2025-05-03 03:05:01,963 INFO calculator_logger: ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59
2025-05-03 03:05:01,963 INFO calculator_logger: ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40
2025-05-03 03:05:01,964 INFO calculator_logger: ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66
2025-05-03 03:05:01,964 INFO calculator_logger: ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56
2025-05-03 03:05:01,965 INFO calculator_logger: ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30
2025-05-03 03:05:01,965 INFO calculator_logger: ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11
2025-05-03 03:05:01,965 INFO calculator_logger: ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21
2025-05-03 03:05:01,966 INFO calculator_logger: ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86
2025-05-03 03:05:01,966 INFO calculator_logger: ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31
2025-05-03 03:05:01,966 INFO calculator_logger: ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85
2025-05-03 03:05:01,967 INFO calculator_logger: ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77
2025-05-03 03:05:01,967 INFO calculator_logger: ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36
2025-05-03 03:05:01,967 INFO calculator_logger: ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95
2025-05-03 03:05:01,968 INFO calculator_logger: ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86
2025-05-03 03:05:01,968 INFO calculator_logger: ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43
2025-05-03 03:05:01,968 INFO calculator_logger: ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02
2025-05-03 03:05:01,968 INFO calculator_logger: ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00
2025-05-03 03:05:01,969 INFO calculator_logger: ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30
2025-05-03 03:05:01,969 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 12185, 'total_pension': 2924471, 'monthly_contribution': 7706, 'years_to_pension': 25, 'breakdown': {'below_cap_amount': 555000, 'above_cap_amount': 225000, 'contrib_below': 24975, 'contrib_above': 67500, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 03:05:01,971 INFO main: Final state from LangGraph: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 12185, 'total_pension': 2924471, 'monthly_contribution': 7706, 'years_to_pension': 25, 'breakdown': {'below_cap_amount': 555000, 'above_cap_amount': 225000, 'contrib_below': 24975, 'contrib_above': 67500, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 03:05:01,972 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-03 03:05:01,973 INFO main: Cleaned response: Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs...
2025-05-03 03:05:01,973 INFO main: [chat endpoint] Final response: 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.'
2025-05-03 03:05:11,734 INFO main: Received message: hur rÃ¤knade du?
2025-05-03 03:05:11,735 INFO main: Session ID: ::1
2025-05-03 03:05:11,738 INFO main: Processing message: hur rÃ¤knade du?
2025-05-03 03:05:11,740 INFO src.graph.pension_graph: Processing question: hur rÃ¤knade du?
2025-05-03 03:05:11,740 INFO agent_logger: [AGENT] Start process. State: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 03:05:11,741 INFO agent_logger: [AGENT] Received question: 'hur rÃ¤knade du?'
2025-05-03 03:05:11,743 INFO agent_logger: [AGENT] Final state to return (calculation log fallback): {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ”¢ ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0\nğŸ’° ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00\nğŸ“… ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25\nğŸ“ˆ ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64\nğŸ“ˆ ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80\nğŸ“ˆ ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46\nğŸ“ˆ ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69\nğŸ“ˆ ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56\nğŸ“ˆ ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17\nğŸ“ˆ ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62\nğŸ“ˆ ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05\nğŸ“ˆ ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59\nğŸ“ˆ ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40\nğŸ“ˆ ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66\nğŸ“ˆ ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56\nğŸ“ˆ ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30\nğŸ“ˆ ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11\nğŸ“ˆ ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21\nğŸ“ˆ ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86\nğŸ“ˆ ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31\nğŸ“ˆ ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85\nğŸ“ˆ ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77\nğŸ“ˆ ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36\nğŸ“ˆ ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95\nğŸ“ˆ ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86\nğŸ“ˆ ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43\nğŸ“ˆ ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02\nğŸ“ˆ ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00\nğŸ“¦ ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30'}
2025-05-03 03:05:11,748 INFO main: Final state from LangGraph: {'question': 'hur rÃ¤knade du?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'response': 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ”¢ ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0\nğŸ’° ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00\nğŸ“… ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25\nğŸ“ˆ ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64\nğŸ“ˆ ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80\nğŸ“ˆ ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46\nğŸ“ˆ ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69\nğŸ“ˆ ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56\nğŸ“ˆ ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17\nğŸ“ˆ ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62\nğŸ“ˆ ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05\nğŸ“ˆ ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59\nğŸ“ˆ ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40\nğŸ“ˆ ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66\nğŸ“ˆ ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56\nğŸ“ˆ ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30\nğŸ“ˆ ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11\nğŸ“ˆ ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21\nğŸ“ˆ ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86\nğŸ“ˆ ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31\nğŸ“ˆ ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85\nğŸ“ˆ ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77\nğŸ“ˆ ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36\nğŸ“ˆ ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95\nğŸ“ˆ ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86\nğŸ“ˆ ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43\nğŸ“ˆ ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02\nğŸ“ˆ ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00\nğŸ“¦ ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30'}
2025-05-03 03:05:11,751 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'response']
2025-05-03 03:05:11,752 INFO main: Cleaned response: HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:

ğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=6...
2025-05-03 03:05:11,752 INFO main: [chat endpoint] Final response: 'HÃ¤r Ã¤r stegen frÃ¥n senaste berÃ¤kningen:\n\nğŸ§® ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0\nğŸ”¢ ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0\nğŸ’° ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00\nğŸ“… ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25\nğŸ“ˆ ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64\nğŸ“ˆ ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80\nğŸ“ˆ ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46\nğŸ“ˆ ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69\nğŸ“ˆ ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56\nğŸ“ˆ ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17\nğŸ“ˆ ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62\nğŸ“ˆ ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05\nğŸ“ˆ ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59\nğŸ“ˆ ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40\nğŸ“ˆ ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66\nğŸ“ˆ ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56\nğŸ“ˆ ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30\nğŸ“ˆ ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11\nğŸ“ˆ ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21\nğŸ“ˆ ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86\nğŸ“ˆ ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31\nğŸ“ˆ ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85\nğŸ“ˆ ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77\nğŸ“ˆ ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36\nğŸ“ˆ ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95\nğŸ“ˆ ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86\nğŸ“ˆ ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43\nğŸ“ˆ ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02\nğŸ“ˆ ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00\nğŸ“¦ ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30'
2025-05-03 11:08:35,260 INFO main:  Shutting down system...
2025-05-03 11:10:05,807 INFO main: Starting server on localhost:9090
2025-05-03 11:10:05,868 INFO main:  Starting system initialization...
2025-05-03 11:10:05,870 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 11:10:05,871 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 11:10:05,871 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 11:10:05,872 INFO main:  Creating new cost tracking database...
2025-05-03 11:10:05,872 INFO main:  System initialization completed successfully
2025-05-03 11:37:00,926 INFO main: Received message: Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?
2025-05-03 11:37:00,928 INFO main: Session ID: ::1
2025-05-03 11:37:00,928 INFO main: Creating new LangGraph session for ::1
2025-05-03 11:37:00,949 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-03 11:37:01,850 INFO main: Processing message: Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?
2025-05-03 11:37:01,861 INFO src.graph.pension_graph: Processing question: Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?
2025-05-03 11:37:01,863 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 11:37:01,869 INFO agent_logger: [AGENT] Received question: 'hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?'
2025-05-03 11:37:01,871 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-03 11:37:01,873 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-03 11:37:01,873 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-03 11:37:01,876 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 45, 'monthly_salary': 35000}, State: {'question': 'Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 11:37:01,877 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 45, 'monthly_salary': 35000}, State: {'question': 'Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 11:37:01,879 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 11:37:01,884 INFO calculator_logger: ğŸ§¹ Loggen har rensats fÃ¶r en ny berÃ¤kning.
2025-05-03 11:37:01,887 INFO calculator_logger: ğŸ§® BerÃ¤kning startad: Ã¥lder=45, lÃ¶n=35000, pensionsÃ¥lder=65, Ã¥r till pension=20, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0
2025-05-03 11:37:01,888 INFO calculator_logger: ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 420000, Ã¶ver tak = 0
2025-05-03 11:37:01,890 INFO calculator_logger: ğŸ’° AvsÃ¤ttning: 4.5% av 420000 = 18900.00, 30.0% av 0 = 0.00
2025-05-03 11:37:01,891 INFO calculator_logger: ğŸ’° LÃ¶nevÃ¤xlingspremie: 0 * 0.0% = 0
2025-05-03 11:37:01,891 INFO calculator_logger: ğŸ“… Ã…rlig avsÃ¤ttning = 18900.00, mÃ¥natlig = 1575.00
2025-05-03 11:37:01,892 INFO calculator_logger: ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 27025.35
2025-05-03 11:37:01,893 INFO calculator_logger: ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 26521.44
2025-05-03 11:37:01,894 INFO calculator_logger: ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 26026.93
2025-05-03 11:37:01,896 INFO calculator_logger: ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 25541.64
2025-05-03 11:37:01,896 INFO calculator_logger: ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 25065.40
2025-05-03 11:37:01,897 INFO calculator_logger: ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 24598.03
2025-05-03 11:37:01,898 INFO calculator_logger: ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 24139.38
2025-05-03 11:37:01,898 INFO calculator_logger: ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 23689.29
2025-05-03 11:37:01,899 INFO calculator_logger: ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 23247.58
2025-05-03 11:37:01,900 INFO calculator_logger: ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 22814.12
2025-05-03 11:37:01,900 INFO calculator_logger: ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 22388.73
2025-05-03 11:37:01,902 INFO calculator_logger: ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 21971.28
2025-05-03 11:37:01,904 INFO calculator_logger: ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 21561.61
2025-05-03 11:37:01,906 INFO calculator_logger: ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 21159.57
2025-05-03 11:37:01,907 INFO calculator_logger: ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 20765.04
2025-05-03 11:37:01,908 INFO calculator_logger: ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 20377.86
2025-05-03 11:37:01,909 INFO calculator_logger: ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 19997.90
2025-05-03 11:37:01,910 INFO calculator_logger: ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 19625.02
2025-05-03 11:37:01,911 INFO calculator_logger: ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 19259.10
2025-05-03 11:37:01,913 INFO calculator_logger: ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 18900.00
2025-05-03 11:37:01,914 INFO calculator_logger: ğŸ“¦ Totalt kapital med tillvÃ¤xt = 454675.26, mÃ¥natlig pension = 1894.48
2025-05-03 11:37:01,915 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 454675 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 1575 kr/mÃ¥n under 20 Ã¥r.', 'last_calculation': {'input': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 1894, 'total_pension': 454675, 'monthly_contribution': 1575, 'years_to_pension': 20, 'breakdown': {'below_cap_amount': 420000, 'above_cap_amount': 0, 'contrib_below': 18900, 'contrib_above': 0, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 11:37:01,923 INFO main: Final state from LangGraph: {'question': 'Hur mycket pension fÃ¥r jag om min lÃ¶n Ã¤r 35000 kr och jag Ã¤r 45 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 454675 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 1575 kr/mÃ¥n under 20 Ã¥r.', 'last_calculation': {'input': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 1894, 'total_pension': 454675, 'monthly_contribution': 1575, 'years_to_pension': 20, 'breakdown': {'below_cap_amount': 420000, 'above_cap_amount': 0, 'contrib_below': 18900, 'contrib_above': 0, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 11:37:01,927 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-03 11:37:01,929 INFO main: Cleaned response: Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/mÃ¥n frÃ¥n 65 Ã¥rs ...
2025-05-03 11:37:01,930 INFO main: [chat endpoint] Final response: 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 454675 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 1575 kr/mÃ¥n under 20 Ã¥r.'
2025-05-03 11:38:04,892 INFO main: Received message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 11:38:04,893 INFO main: Session ID: ::1
2025-05-03 11:38:04,900 INFO main: Processing message: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 11:38:04,909 INFO src.graph.pension_graph: Processing question: Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?
2025-05-03 11:38:04,910 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...'}
2025-05-03 11:38:04,914 INFO agent_logger: [AGENT] Received question: 'hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?'
2025-05-03 11:38:04,920 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-03 11:38:04,922 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-03 11:38:04,923 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-03 11:38:04,923 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 11:38:04,925 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 40, 'monthly_salary': 65000}, State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 11:38:04,927 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-03 11:38:04,932 INFO calculator_logger: ğŸ§¹ Loggen har rensats fÃ¶r en ny berÃ¤kning.
2025-05-03 11:38:04,933 INFO calculator_logger: ğŸ§® BerÃ¤kning startad: Ã¥lder=40, lÃ¶n=65000, pensionsÃ¥lder=65, Ã¥r till pension=25, tillvÃ¤xt=0.019, lÃ¶nevÃ¤xling=0, lÃ¶nevÃ¤xlingspremie=0
2025-05-03 11:38:04,934 INFO calculator_logger: ğŸ”¢ Inkomsttak (Ã¥rsvis) = 555000.0, under tak = 555000.0, Ã¶ver tak = 225000.0
2025-05-03 11:38:04,936 INFO calculator_logger: ğŸ’° AvsÃ¤ttning: 4.5% av 555000.0 = 24975.00, 30.0% av 225000.0 = 67500.00
2025-05-03 11:38:04,937 INFO calculator_logger: ğŸ’° LÃ¶nevÃ¤xlingspremie: 0 * 0.0% = 0
2025-05-03 11:38:04,938 INFO calculator_logger: ğŸ“… Ã…rlig avsÃ¤ttning = 92475.00, mÃ¥natlig = 7706.25
2025-05-03 11:38:04,939 INFO calculator_logger: ğŸ“ˆ Ã…r 1: insÃ¤ttning + tillvÃ¤xt = 145279.64
2025-05-03 11:38:04,939 INFO calculator_logger: ğŸ“ˆ Ã…r 2: insÃ¤ttning + tillvÃ¤xt = 142570.80
2025-05-03 11:38:04,941 INFO calculator_logger: ğŸ“ˆ Ã…r 3: insÃ¤ttning + tillvÃ¤xt = 139912.46
2025-05-03 11:38:04,942 INFO calculator_logger: ğŸ“ˆ Ã…r 4: insÃ¤ttning + tillvÃ¤xt = 137303.69
2025-05-03 11:38:04,943 INFO calculator_logger: ğŸ“ˆ Ã…r 5: insÃ¤ttning + tillvÃ¤xt = 134743.56
2025-05-03 11:38:04,943 INFO calculator_logger: ğŸ“ˆ Ã…r 6: insÃ¤ttning + tillvÃ¤xt = 132231.17
2025-05-03 11:38:04,944 INFO calculator_logger: ğŸ“ˆ Ã…r 7: insÃ¤ttning + tillvÃ¤xt = 129765.62
2025-05-03 11:38:04,945 INFO calculator_logger: ğŸ“ˆ Ã…r 8: insÃ¤ttning + tillvÃ¤xt = 127346.05
2025-05-03 11:38:04,946 INFO calculator_logger: ğŸ“ˆ Ã…r 9: insÃ¤ttning + tillvÃ¤xt = 124971.59
2025-05-03 11:38:04,947 INFO calculator_logger: ğŸ“ˆ Ã…r 10: insÃ¤ttning + tillvÃ¤xt = 122641.40
2025-05-03 11:38:04,948 INFO calculator_logger: ğŸ“ˆ Ã…r 11: insÃ¤ttning + tillvÃ¤xt = 120354.66
2025-05-03 11:38:04,950 INFO calculator_logger: ğŸ“ˆ Ã…r 12: insÃ¤ttning + tillvÃ¤xt = 118110.56
2025-05-03 11:38:04,951 INFO calculator_logger: ğŸ“ˆ Ã…r 13: insÃ¤ttning + tillvÃ¤xt = 115908.30
2025-05-03 11:38:04,951 INFO calculator_logger: ğŸ“ˆ Ã…r 14: insÃ¤ttning + tillvÃ¤xt = 113747.11
2025-05-03 11:38:04,952 INFO calculator_logger: ğŸ“ˆ Ã…r 15: insÃ¤ttning + tillvÃ¤xt = 111626.21
2025-05-03 11:38:04,953 INFO calculator_logger: ğŸ“ˆ Ã…r 16: insÃ¤ttning + tillvÃ¤xt = 109544.86
2025-05-03 11:38:04,954 INFO calculator_logger: ğŸ“ˆ Ã…r 17: insÃ¤ttning + tillvÃ¤xt = 107502.31
2025-05-03 11:38:04,955 INFO calculator_logger: ğŸ“ˆ Ã…r 18: insÃ¤ttning + tillvÃ¤xt = 105497.85
2025-05-03 11:38:04,956 INFO calculator_logger: ğŸ“ˆ Ã…r 19: insÃ¤ttning + tillvÃ¤xt = 103530.77
2025-05-03 11:38:04,958 INFO calculator_logger: ğŸ“ˆ Ã…r 20: insÃ¤ttning + tillvÃ¤xt = 101600.36
2025-05-03 11:38:04,959 INFO calculator_logger: ğŸ“ˆ Ã…r 21: insÃ¤ttning + tillvÃ¤xt = 99705.95
2025-05-03 11:38:04,961 INFO calculator_logger: ğŸ“ˆ Ã…r 22: insÃ¤ttning + tillvÃ¤xt = 97846.86
2025-05-03 11:38:04,962 INFO calculator_logger: ğŸ“ˆ Ã…r 23: insÃ¤ttning + tillvÃ¤xt = 96022.43
2025-05-03 11:38:04,963 INFO calculator_logger: ğŸ“ˆ Ã…r 24: insÃ¤ttning + tillvÃ¤xt = 94232.02
2025-05-03 11:38:04,964 INFO calculator_logger: ğŸ“ˆ Ã…r 25: insÃ¤ttning + tillvÃ¤xt = 92475.00
2025-05-03 11:38:04,966 INFO calculator_logger: ğŸ“¦ Totalt kapital med tillvÃ¤xt = 2924471.24, mÃ¥natlig pension = 12185.30
2025-05-03 11:38:04,968 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'ğŸ” Bearbetar frÃ¥gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 12185, 'total_pension': 2924471, 'monthly_contribution': 7706, 'years_to_pension': 25, 'breakdown': {'below_cap_amount': 555000, 'above_cap_amount': 225000, 'contrib_below': 24975, 'contrib_above': 67500, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 11:38:04,980 INFO main: Final state from LangGraph: {'question': 'Hur mycket fÃ¥r jag i pension om jag tjÃ¤nar 65000kr /mÃ¥n jag Ã¤r 40 Ã¥r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'âœ… Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.', 'last_calculation': {'input': {'age': 40, 'monthly_salary': 65000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 12185, 'total_pension': 2924471, 'monthly_contribution': 7706, 'years_to_pension': 25, 'breakdown': {'below_cap_amount': 555000, 'above_cap_amount': 225000, 'contrib_below': 24975, 'contrib_above': 67500, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-03 11:38:04,987 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-03 11:38:04,989 INFO main: Cleaned response: Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs...
2025-05-03 11:38:04,992 INFO main: [chat endpoint] Final response: 'Baserat pÃ¥ dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 12185 kr/mÃ¥n frÃ¥n 65 Ã¥rs Ã¥lder. Det motsvarar ett totalt kapital pÃ¥ ca 2924471 kr, baserat pÃ¥ en avsÃ¤ttning pÃ¥ 7706 kr/mÃ¥n under 25 Ã¥r.'
2025-05-03 17:04:26,942 INFO main:  Shutting down system...
2025-05-03 17:05:01,316 INFO main: Starting server on localhost:9090
2025-05-03 17:05:01,413 INFO main:  Starting system initialization...
2025-05-03 17:05:01,414 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 17:05:01,415 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 17:05:01,417 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 17:05:01,418 INFO main:  Creating new cost tracking database...
2025-05-03 17:05:01,418 INFO main:  System initialization completed successfully
2025-05-03 17:08:12,145 INFO main:  Shutting down system...
2025-05-03 17:34:55,749 INFO main: Starting server on localhost:9090
2025-05-03 17:34:55,804 INFO main:  Starting system initialization...
2025-05-03 17:34:55,805 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 17:34:55,806 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 17:34:55,807 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 17:34:55,808 INFO main:  Creating new cost tracking database...
2025-05-03 17:34:55,808 INFO main:  System initialization completed successfully
2025-05-03 17:51:48,345 INFO main:  Shutting down system...
2025-05-03 17:51:56,585 INFO main: Starting server on localhost:9090
2025-05-03 17:51:56,666 INFO main:  Starting system initialization...
2025-05-03 17:51:56,668 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 17:51:56,669 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 17:51:56,670 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 17:51:56,670 INFO main:  Creating new cost tracking database...
2025-05-03 17:51:56,670 INFO main:  System initialization completed successfully
2025-05-03 19:23:13,881 INFO main:  Shutting down system...
2025-05-03 19:23:20,879 INFO main: Starting server on localhost:9090
2025-05-03 19:23:20,935 INFO main:  Starting system initialization...
2025-05-03 19:23:20,936 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-03 19:23:20,937 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-03 19:23:20,938 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-03 19:23:20,939 INFO main:  Creating new cost tracking database...
2025-05-03 19:23:20,940 INFO main:  System initialization completed successfully
2025-05-03 21:34:56,697 INFO main:  Shutting down system...
