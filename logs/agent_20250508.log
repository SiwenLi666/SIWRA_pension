2025-05-08 12:13:46,911 INFO main: Starting server on localhost:9090
2025-05-08 12:13:47,075 INFO main:  Starting system initialization...
2025-05-08 12:13:47,076 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-08 12:13:47,077 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-08 12:13:47,078 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-08 12:13:47,079 INFO main:  Creating new cost tracking database...
2025-05-08 12:13:47,079 INFO main:  System initialization completed successfully
2025-05-08 12:14:03,841 INFO main: Received message: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 12:14:03,842 INFO main: Session ID: ::1
2025-05-08 12:14:03,842 INFO main: Creating new LangGraph session for ::1
2025-05-08 12:14:03,850 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-08 12:14:04,237 INFO main: Processing message: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 12:14:04,242 INFO src.graph.pension_graph: Processing question: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 12:14:04,243 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:14:04,243 INFO agent_logger: [AGENT] Received question: 'vad √§r pa16 och n√§r tr√§der de nya √§ndringarna i kraft?'
2025-05-08 12:14:04,244 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:14:04,244 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 12:14:04,245 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 12:14:04,246 INFO src.tools.summary_checker: No matching summary found
2025-05-08 12:14:04,246 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 12:14:04,247 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 12:14:04,247 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 12:14:04,247 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 12:14:04,247 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 12:14:04,248 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 2547885276416; state: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:14:04,248 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 2547885276416; state: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:14:04,249 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 12:14:05,313 INFO faiss.loader: Loading faiss with AVX2 support.
2025-05-08 12:14:05,421 INFO faiss.loader: Successfully loaded faiss with AVX2 support.
2025-05-08 12:14:05,437 INFO faiss: Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-08 12:14:05,469 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 12:14:05,562 INFO src.retriever.retriever_tool: üìö BM25 initialized with 1455 documents
2025-05-08 12:14:05,563 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 12:14:11,605 INFO vector_retriever_logger: Generated response using LLM with source references
2025-05-08 12:14:11,606 INFO vector_retriever_logger: Returning response: Tyv√§rr, kontexten ger inte tillr√§cklig information f√∂r att beskriva vad PA16 √§r. Dock, de nya √§ndringarna i de best√§mmelser som n√§mns i kontexten tr√§der i kraft den 1 januari 2024 [1][2].

<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[3]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[4]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[5]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li></ul>
2025-05-08 12:14:11,608 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 2547885276416; result: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x000002513D94C1A0>, 'response': 'Tyv√§rr, kontexten ger inte tillr√§cklig information f√∂r att beskriva vad PA16 √§r. Dock, de nya √§ndringarna i de best√§mmelser som n√§mns i kontexten tr√§der i kraft den 1 januari 2024 [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[3]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[4]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[5]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:14:11,610 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 12:14:11,612 INFO main: Final state from LangGraph: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x000002513D94C1A0>, 'response': 'Tyv√§rr, kontexten ger inte tillr√§cklig information f√∂r att beskriva vad PA16 √§r. Dock, de nya √§ndringarna i de best√§mmelser som n√§mns i kontexten tr√§der i kraft den 1 januari 2024 [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[3]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[4]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[5]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:14:11,614 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 12:14:11,614 INFO main: Cleaned response: Tyv√§rr, kontexten ger inte tillr√§cklig information f√∂r att beskriva vad PA16 √§r. Dock, de nya √§ndrin...
2025-05-08 12:14:11,615 INFO main: [chat endpoint] Final response: 'Tyv√§rr, kontexten ger inte tillr√§cklig information f√∂r att beskriva vad PA16 √§r. Dock, de nya √§ndringarna i de best√§mmelser som n√§mns i kontexten tr√§der i kraft den 1 januari 2024 [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3, 4, 5</li><li><strong>[3]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[4]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[5]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li></ul>'
2025-05-08 12:14:46,352 INFO main: Received message: Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?
2025-05-08 12:14:46,352 INFO main: Session ID: ::1
2025-05-08 12:14:46,355 INFO main: Processing message: Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?
2025-05-08 12:14:46,357 INFO src.graph.pension_graph: Processing question: Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?
2025-05-08 12:14:46,357 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:14:46,357 INFO agent_logger: [AGENT] Received question: 'vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt pa16?'
2025-05-08 12:14:46,358 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:14:46,358 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 12:14:46,358 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 12:14:46,359 INFO src.tools.summary_checker: No matching summary found
2025-05-08 12:14:46,359 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 12:14:46,360 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 12:14:46,360 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 12:14:46,360 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 12:14:46,360 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 12:14:46,361 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 2548912379200; state: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:14:46,361 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 2548912379200; state: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:14:46,362 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 12:14:47,268 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 12:14:47,353 INFO src.retriever.retriever_tool: üìö BM25 initialized with 1455 documents
2025-05-08 12:14:47,353 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 12:15:01,398 INFO vector_retriever_logger: Generated response using LLM with source references
2025-05-08 12:15:01,399 INFO vector_retriever_logger: Returning response: Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, f√∂rfaller f√∂rm√•nen fram till m√•nadsskiftet n√§rmast efter det att anst√§llningen upph√∂rde. I dessa fall kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom finns det en √∂verenskommelse om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner enligt statliga tj√§nstepensionsbest√§mmelser [5].

<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[3]</strong> PA16 | kapitel: 10 KAP | sida 17, 18, 19</li><li><strong>[4]</strong> PA16 | kapitel: 6 KAP | sida 40, 41, 42</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3, 4</li></ul>
2025-05-08 12:15:01,400 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 2548912379200; result: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x000002513DD9EAD0>, 'response': 'Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, f√∂rfaller f√∂rm√•nen fram till m√•nadsskiftet n√§rmast efter det att anst√§llningen upph√∂rde. I dessa fall kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom finns det en √∂verenskommelse om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner enligt statliga tj√§nstepensionsbest√§mmelser [5].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[3]</strong> PA16 | kapitel: 10 KAP | sida 17, 18, 19</li><li><strong>[4]</strong> PA16 | kapitel: 6 KAP | sida 40, 41, 42</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3, 4</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:15:01,402 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 12:15:01,403 INFO main: Final state from LangGraph: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x000002513DD9EAD0>, 'response': 'Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, f√∂rfaller f√∂rm√•nen fram till m√•nadsskiftet n√§rmast efter det att anst√§llningen upph√∂rde. I dessa fall kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom finns det en √∂verenskommelse om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner enligt statliga tj√§nstepensionsbest√§mmelser [5].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[3]</strong> PA16 | kapitel: 10 KAP | sida 17, 18, 19</li><li><strong>[4]</strong> PA16 | kapitel: 6 KAP | sida 40, 41, 42</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3, 4</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:15:01,405 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 12:15:01,405 INFO main: Cleaned response: Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. O...
2025-05-08 12:15:01,406 INFO main: [chat endpoint] Final response: 'Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, f√∂rfaller f√∂rm√•nen fram till m√•nadsskiftet n√§rmast efter det att anst√§llningen upph√∂rde. I dessa fall kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom finns det en √∂verenskommelse om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner enligt statliga tj√§nstepensionsbest√§mmelser [5].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> SKR2023 | sida 1, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 21, 22, 23, 24, 25, 27, 28, 29, 31, 32, 33, 34, 35, 37, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141</li><li><strong>[3]</strong> PA16 | kapitel: 10 KAP | sida 17, 18, 19</li><li><strong>[4]</strong> PA16 | kapitel: 6 KAP | sida 40, 41, 42</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3, 4</li></ul>'
2025-05-08 12:27:19,998 INFO main:  Shutting down system...
2025-05-08 12:34:02,491 INFO main: Starting server on localhost:9090
2025-05-08 12:34:02,607 INFO main:  Starting system initialization...
2025-05-08 12:34:02,609 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-08 12:34:02,610 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-08 12:34:02,610 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-08 12:34:02,611 INFO main:  Creating new cost tracking database...
2025-05-08 12:34:02,611 INFO main:  System initialization completed successfully
2025-05-08 12:35:50,957 INFO main: Received message: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 12:35:50,957 INFO main: Session ID: ::1
2025-05-08 12:35:50,958 INFO main: Creating new LangGraph session for ::1
2025-05-08 12:35:50,962 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-08 12:35:51,288 INFO main: Processing message: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 12:35:51,292 INFO src.graph.pension_graph: Processing question: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 12:35:51,292 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:35:51,292 INFO agent_logger: [AGENT] Received question: 'vad √§r pa16 och n√§r tr√§der de nya √§ndringarna i kraft?'
2025-05-08 12:35:51,293 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:35:51,293 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 12:35:51,294 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 12:35:51,295 INFO src.tools.summary_checker: No matching summary found
2025-05-08 12:35:51,295 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 12:35:51,295 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 12:35:51,295 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 12:35:51,295 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 12:35:51,296 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 12:35:51,296 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1639489559872; state: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:35:51,296 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1639489559872; state: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:35:51,297 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 12:35:52,145 INFO faiss.loader: Loading faiss with AVX2 support.
2025-05-08 12:35:52,177 INFO faiss.loader: Successfully loaded faiss with AVX2 support.
2025-05-08 12:35:52,185 INFO faiss: Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-08 12:35:52,207 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 12:35:52,295 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 12:35:52,296 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 12:35:53,279 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 12:35:53,279 INFO src.utils.agreement_utils: Filtered 10 documents to 3 for agreement 'PA16'
2025-05-08 12:35:54,207 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 12:35:57,653 INFO vector_retriever_logger: Generated response using LLM with source references
2025-05-08 12:35:57,653 INFO vector_retriever_logger: Returning response: PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].

<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | 8 KAP</li></ul>
2025-05-08 12:35:57,654 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1639489559872; result: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000017DBCEA8EC0>, 'response': 'PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | 8 KAP</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:35:57,655 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 12:35:57,656 INFO main: Final state from LangGraph: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000017DBCEA8EC0>, 'response': 'PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | 8 KAP</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:35:57,656 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 12:35:57,657 INFO main: Cleaned response: PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De ny...
2025-05-08 12:35:57,657 INFO main: [chat endpoint] Final response: 'PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | 8 KAP</li></ul>'
2025-05-08 12:44:13,471 INFO main: Received message: Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?
2025-05-08 12:44:13,472 INFO main: Session ID: ::1
2025-05-08 12:44:13,478 INFO main: Processing message: Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?
2025-05-08 12:44:13,480 INFO src.graph.pension_graph: Processing question: Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?
2025-05-08 12:44:13,480 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:44:13,481 INFO agent_logger: [AGENT] Received question: 'vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt pa16?'
2025-05-08 12:44:13,481 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:44:13,481 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 12:44:13,482 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 12:44:13,483 INFO src.tools.summary_checker: No matching summary found
2025-05-08 12:44:13,483 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 12:44:13,483 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 12:44:13,483 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 12:44:13,483 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 12:44:13,484 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 12:44:13,484 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1640523113984; state: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:44:13,484 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1640523113984; state: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:44:13,485 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 12:44:14,269 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 12:44:14,353 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 12:44:14,354 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 12:44:15,211 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 12:44:15,212 INFO src.utils.agreement_utils: Filtered 10 documents to 7 for agreement 'PA16'
2025-05-08 12:44:15,946 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 12:44:25,029 INFO vector_retriever_logger: Generated response using LLM with source references
2025-05-08 12:44:25,030 INFO vector_retriever_logger: Returning response: Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom har parterna kommit √∂verens om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner [3] samt f√∂rm√•nsbest√§md √•lderspension, fribrev och egenlivr√§nta enligt statliga tj√§nstepensionsbest√§mmelser [5].

<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | 10 KAP</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 6 KAP</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3</li></ul>
2025-05-08 12:44:25,032 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1640523113984; result: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000017DBB358CD0>, 'response': 'Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom har parterna kommit √∂verens om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner [3] samt f√∂rm√•nsbest√§md √•lderspension, fribrev och egenlivr√§nta enligt statliga tj√§nstepensionsbest√§mmelser [5].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | 10 KAP</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 6 KAP</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:44:25,034 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 12:44:25,037 INFO main: Final state from LangGraph: {'question': 'Vilka m√∂jligheter finns det att skjuta upp pensionsutbetalningar enligt PA16?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000017DBB358CD0>, 'response': 'Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom har parterna kommit √∂verens om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner [3] samt f√∂rm√•nsbest√§md √•lderspension, fribrev och egenlivr√§nta enligt statliga tj√§nstepensionsbest√§mmelser [5].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | 10 KAP</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 6 KAP</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:44:25,040 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 12:44:25,041 INFO main: Cleaned response: Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. O...
2025-05-08 12:44:25,041 INFO main: [chat endpoint] Final response: 'Enligt PA16 finns det m√∂jligheter att skjuta upp pensionsutbetalningar under vissa omst√§ndigheter. Om en arbetstagare ensidigt bryter √∂verenskommelsen eller om anst√§llningen avslutas p√• grund av avskedande eller upps√§gning f√∂r personliga sk√§l, kan arbetstagaren, om det finns s√§rskilda sk√§l, beg√§ra att pensionsn√§mnden pr√∂var fr√•gan om ett uppskjutet uttag [1]. Dessutom har parterna kommit √∂verens om att inf√∂ra m√∂jligheter att g√∂ra uppeh√•ll under utbetalning av premiebest√§mda √•lderspensioner [3] samt f√∂rm√•nsbest√§md √•lderspension, fribrev och egenlivr√§nta enligt statliga tj√§nstepensionsbest√§mmelser [5].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | 10 KAP</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 6 KAP</li><li><strong>[5]</strong> PA16 | sida 1, 2, 3</li></ul>'
2025-05-08 12:44:46,486 INFO main: Received message: Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?
2025-05-08 12:44:46,486 INFO main: Session ID: ::1
2025-05-08 12:44:46,489 INFO main: Processing message: Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?
2025-05-08 12:44:46,491 INFO src.graph.pension_graph: Processing question: Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?
2025-05-08 12:44:46,491 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:44:46,492 INFO agent_logger: [AGENT] Received question: 'hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?'
2025-05-08 12:44:46,492 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:44:46,493 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: True
2025-05-08 12:44:46,493 INFO agent_logger: [AGENT] Selected tool: CalculatorTool
2025-05-08 12:44:46,494 INFO agent_logger: [AGENT] After parameter extraction. Extracted: {'age': 45, 'monthly_salary': 35000}, State: {'question': 'Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-08 12:44:46,494 INFO agent_logger: [AGENT] After merging/defaulting. Merged: {'age': 45, 'monthly_salary': 35000}, State: {'question': 'Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-08 12:44:46,495 INFO agent_logger: [AGENT] Before calling tool: CalculatorTool. State: {'question': 'Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool'}
2025-05-08 12:44:46,497 INFO calculator_logger: üßπ Loggen har rensats f√∂r en ny ber√§kning.
2025-05-08 12:44:46,498 INFO calculator_logger: üßÆ Ber√§kning startad: √•lder=45, l√∂n=35000, pensions√•lder=65, √•r till pension=20, tillv√§xt=0.019, l√∂nev√§xling=0, l√∂nev√§xlingspremie=0
2025-05-08 12:44:46,498 INFO calculator_logger: üî¢ Inkomsttak (√•rsvis) = 555000.0, under tak = 420000, √∂ver tak = 0
2025-05-08 12:44:46,499 INFO calculator_logger: üí∞ Avs√§ttning: 4.5% av 420000 = 18900.00, 30.0% av 0 = 0.00
2025-05-08 12:44:46,499 INFO calculator_logger: üí∞ L√∂nev√§xlingspremie: 0 * 0.0% = 0
2025-05-08 12:44:46,499 INFO calculator_logger: üìÖ √Örlig avs√§ttning = 18900.00, m√•natlig = 1575.00
2025-05-08 12:44:46,500 INFO calculator_logger: üìà √Ör 1: ins√§ttning + tillv√§xt = 27025.35
2025-05-08 12:44:46,500 INFO calculator_logger: üìà √Ör 2: ins√§ttning + tillv√§xt = 26521.44
2025-05-08 12:44:46,500 INFO calculator_logger: üìà √Ör 3: ins√§ttning + tillv√§xt = 26026.93
2025-05-08 12:44:46,501 INFO calculator_logger: üìà √Ör 4: ins√§ttning + tillv√§xt = 25541.64
2025-05-08 12:44:46,501 INFO calculator_logger: üìà √Ör 5: ins√§ttning + tillv√§xt = 25065.40
2025-05-08 12:44:46,501 INFO calculator_logger: üìà √Ör 6: ins√§ttning + tillv√§xt = 24598.03
2025-05-08 12:44:46,501 INFO calculator_logger: üìà √Ör 7: ins√§ttning + tillv√§xt = 24139.38
2025-05-08 12:44:46,502 INFO calculator_logger: üìà √Ör 8: ins√§ttning + tillv√§xt = 23689.29
2025-05-08 12:44:46,502 INFO calculator_logger: üìà √Ör 9: ins√§ttning + tillv√§xt = 23247.58
2025-05-08 12:44:46,502 INFO calculator_logger: üìà √Ör 10: ins√§ttning + tillv√§xt = 22814.12
2025-05-08 12:44:46,503 INFO calculator_logger: üìà √Ör 11: ins√§ttning + tillv√§xt = 22388.73
2025-05-08 12:44:46,503 INFO calculator_logger: üìà √Ör 12: ins√§ttning + tillv√§xt = 21971.28
2025-05-08 12:44:46,503 INFO calculator_logger: üìà √Ör 13: ins√§ttning + tillv√§xt = 21561.61
2025-05-08 12:44:46,503 INFO calculator_logger: üìà √Ör 14: ins√§ttning + tillv√§xt = 21159.57
2025-05-08 12:44:46,504 INFO calculator_logger: üìà √Ör 15: ins√§ttning + tillv√§xt = 20765.04
2025-05-08 12:44:46,504 INFO calculator_logger: üìà √Ör 16: ins√§ttning + tillv√§xt = 20377.86
2025-05-08 12:44:46,504 INFO calculator_logger: üìà √Ör 17: ins√§ttning + tillv√§xt = 19997.90
2025-05-08 12:44:46,505 INFO calculator_logger: üìà √Ör 18: ins√§ttning + tillv√§xt = 19625.02
2025-05-08 12:44:46,505 INFO calculator_logger: üìà √Ör 19: ins√§ttning + tillv√§xt = 19259.10
2025-05-08 12:44:46,506 INFO calculator_logger: üìà √Ör 20: ins√§ttning + tillv√§xt = 18900.00
2025-05-08 12:44:46,506 INFO calculator_logger: üì¶ Totalt kapital med tillv√§xt = 454675.26, m√•natlig pension = 1894.48
2025-05-08 12:44:46,506 INFO agent_logger: [AGENT] After tool run. State: {'question': 'Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat p√• dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/m√•n fr√•n 65 √•rs √•lder. Det motsvarar ett totalt kapital p√• ca 454675 kr, baserat p√• en avs√§ttning p√• 1575 kr/m√•n under 20 √•r.', 'last_calculation': {'input': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 1894, 'total_pension': 454675, 'monthly_contribution': 1575, 'years_to_pension': 20, 'breakdown': {'below_cap_amount': 420000, 'above_cap_amount': 0, 'contrib_below': 18900, 'contrib_above': 0, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-08 12:44:46,508 INFO main: Final state from LangGraph: {'question': 'Hur mycket pension f√•r jag om min l√∂n √§r 35000 kr och jag √§r 45 √•r?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'CalculatorTool', 'user_profile': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'response': 'Baserat p√• dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/m√•n fr√•n 65 √•rs √•lder. Det motsvarar ett totalt kapital p√• ca 454675 kr, baserat p√• en avs√§ttning p√• 1575 kr/m√•n under 20 √•r.', 'last_calculation': {'input': {'age': 45, 'monthly_salary': 35000, 'agreement': 'PA16', 'scenario': 'Avd1', 'retirement_age': 65, 'growth': 0.019}, 'result': {'monthly_pension': 1894, 'total_pension': 454675, 'monthly_contribution': 1575, 'years_to_pension': 20, 'breakdown': {'below_cap_amount': 420000, 'above_cap_amount': 0, 'contrib_below': 18900, 'contrib_above': 0, 'rate_below': 0.045, 'rate_above': 0.3}}, 'agreement': 'PA16', 'scenario': 'Avd1'}}
2025-05-08 12:44:46,510 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'user_profile', 'response', 'last_calculation']
2025-05-08 12:44:46,510 INFO main: Cleaned response: Baserat p√• dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/m√•n fr√•n 65 √•rs ...
2025-05-08 12:44:46,511 INFO main: [chat endpoint] Final response: 'Baserat p√• dina uppgifter uppskattas din pension enligt PA16 (Avd1) till ca 1894 kr/m√•n fr√•n 65 √•rs √•lder. Det motsvarar ett totalt kapital p√• ca 454675 kr, baserat p√• en avs√§ttning p√• 1575 kr/m√•n under 20 √•r.'
2025-05-08 12:44:51,368 INFO main: Received message: Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?
2025-05-08 12:44:51,368 INFO main: Session ID: ::1
2025-05-08 12:44:51,371 INFO main: Processing message: Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?
2025-05-08 12:44:51,372 INFO src.graph.pension_graph: Processing question: Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?
2025-05-08 12:44:51,373 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:44:51,373 INFO agent_logger: [AGENT] Received question: 'vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?'
2025-05-08 12:44:51,374 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:44:51,374 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 12:44:51,374 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 12:44:51,375 INFO src.tools.summary_checker: No matching summary found
2025-05-08 12:44:51,376 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 12:44:51,376 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 12:44:51,376 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 12:44:51,377 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 12:44:51,377 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 12:44:51,377 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1640510682112; state: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:44:51,377 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1640510682112; state: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 12:44:51,378 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 12:44:52,155 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 12:44:52,244 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 12:44:52,245 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 12:44:53,078 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 12:44:53,079 INFO src.utils.agreement_utils: Using default agreement PA16 for query: 'vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?'
2025-05-08 12:44:53,080 INFO src.utils.agreement_utils: Filtered 10 documents to 5 for agreement 'PA16'
2025-05-08 12:44:53,857 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 12:44:53,858 INFO src.utils.agreement_utils: Using default agreement PA16 for query: 'vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?'
2025-05-08 12:44:59,365 INFO vector_retriever_logger: Generated response using LLM with source references
2025-05-08 12:44:59,365 INFO vector_retriever_logger: Returning response: Tyv√§rr, jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om vilka √§ndringar i pensionsutbetalningar som kommer att g√§lla fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten n√§mner att det kommer att ske √§ndringar fr√•n detta datum, men det specificeras inte vilka dessa √§ndringar √§r [1].

<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 12 KAP</li><li><strong>[5]</strong> PA16 | 1 KAP</li></ul>
2025-05-08 12:44:59,367 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1640510682112; result: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000017DBB33AFD0>, 'response': 'Tyv√§rr, jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om vilka √§ndringar i pensionsutbetalningar som kommer att g√§lla fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten n√§mner att det kommer att ske √§ndringar fr√•n detta datum, men det specificeras inte vilka dessa √§ndringar √§r [1].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 12 KAP</li><li><strong>[5]</strong> PA16 | 1 KAP</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:44:59,368 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 12:44:59,369 INFO main: Final state from LangGraph: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000017DBB33AFD0>, 'response': 'Tyv√§rr, jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om vilka √§ndringar i pensionsutbetalningar som kommer att g√§lla fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten n√§mner att det kommer att ske √§ndringar fr√•n detta datum, men det specificeras inte vilka dessa √§ndringar √§r [1].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 12 KAP</li><li><strong>[5]</strong> PA16 | 1 KAP</li></ul>', 'response_source': 'vector_db'}
2025-05-08 12:44:59,370 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 12:44:59,371 INFO main: Cleaned response: Tyv√§rr, jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om vilka √§ndringar i pensions...
2025-05-08 12:44:59,372 INFO main: [chat endpoint] Final response: 'Tyv√§rr, jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om vilka √§ndringar i pensionsutbetalningar som kommer att g√§lla fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten n√§mner att det kommer att ske √§ndringar fr√•n detta datum, men det specificeras inte vilka dessa √§ndringar √§r [1].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | sida 1, 2, 3</li><li><strong>[4]</strong> PA16 | 12 KAP</li><li><strong>[5]</strong> PA16 | 1 KAP</li></ul>'
2025-05-08 12:48:04,821 INFO main: Received message: vilka avtal har du kolla p√• just nu?
2025-05-08 12:48:04,821 INFO main: Session ID: ::1
2025-05-08 12:48:04,829 INFO main: Processing message: vilka avtal har du kolla p√• just nu?
2025-05-08 12:48:04,831 INFO src.graph.pension_graph: Processing question: vilka avtal har du kolla p√• just nu?
2025-05-08 12:48:04,831 INFO agent_logger: [AGENT] Start process. State: {'question': 'vilka avtal har du kolla p√• just nu?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 12:48:04,831 INFO agent_logger: [AGENT] Received question: 'vilka avtal har du kolla p√• just nu?'
2025-05-08 12:48:04,832 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 12:48:04,832 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 12:48:04,832 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 12:48:04,833 INFO src.tools.summary_checker: Found matching summary: available_agreements.json
2025-05-08 12:48:04,834 INFO src.tools.summary_checker: Returning summary content: Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).
2025-05-08 12:48:04,834 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: True
2025-05-08 12:48:04,835 INFO agent_logger: [AGENT] Selected tool: SummaryCheckerTool
2025-05-08 12:48:04,836 INFO agent_logger: [AGENT] Running tool SummaryCheckerTool with standard execution (no parameter extraction)
2025-05-08 12:48:04,836 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1640512277056; state: {'question': 'vilka avtal har du kolla p√• just nu?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'SummaryCheckerTool'}
2025-05-08 12:48:04,837 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1640512277056; state: {'question': 'vilka avtal har du kolla p√• just nu?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'SummaryCheckerTool'}
2025-05-08 12:48:04,837 INFO src.tools.summary_checker: Running summary checker tool with question: 'vilka avtal har du kolla p√• just nu?'
2025-05-08 12:48:04,838 INFO src.tools.summary_checker: Found matching summary: available_agreements.json
2025-05-08 12:48:04,839 INFO src.tools.summary_checker: Returning summary content: Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).
2025-05-08 12:48:04,839 INFO src.tools.summary_checker: [SUMMARY_TOOL] _find_matching_summary returned: 'Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).'
2025-05-08 12:48:04,839 INFO src.tools.summary_checker: Returning summary response: Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).
2025-05-08 12:48:04,840 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1640512277056; result: {'question': 'vilka avtal har du kolla p√• just nu?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'SummaryCheckerTool', 'response': 'Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).', 'response_source': 'summary_json'}
2025-05-08 12:48:04,840 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 12:48:04,842 INFO main: Final state from LangGraph: {'question': 'vilka avtal har du kolla p√• just nu?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'SummaryCheckerTool', 'response': 'Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).', 'response_source': 'summary_json'}
2025-05-08 12:48:04,842 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'response', 'response_source']
2025-05-08 12:48:04,843 INFO main: Cleaned response: Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommun...
2025-05-08 12:48:04,843 INFO main: [chat endpoint] Final response: 'Jag har information om f√∂ljande pensionsavtal: PA16 (f√∂r statligt anst√§llda) och SKR2023 (f√∂r kommunalt anst√§llda).'
2025-05-08 13:04:00,238 INFO main:  Shutting down system...
2025-05-08 13:04:08,948 INFO main: Starting server on localhost:9090
2025-05-08 13:04:09,079 INFO main:  Starting system initialization...
2025-05-08 13:04:09,081 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\data
2025-05-08 13:04:09,082 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs
2025-05-08 13:04:09,083 INFO main:  Ensured directory exists: D:\AI folder\AI agent\LangGraph_agent\SIWRA_pension_restructured\docs\agreements
2025-05-08 13:04:09,084 INFO main:  Creating new cost tracking database...
2025-05-08 13:04:09,084 INFO main:  System initialization completed successfully
2025-05-08 13:06:48,601 INFO main: Received message: Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?
2025-05-08 13:06:48,601 INFO main: Session ID: ::1
2025-05-08 13:06:48,601 INFO main: Creating new LangGraph session for ::1
2025-05-08 13:06:48,617 WARNING main: LangGraph visualization module not available. Visualization features will be disabled.
2025-05-08 13:06:48,934 INFO main: Processing message: Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?
2025-05-08 13:06:48,938 INFO src.graph.pension_graph: Processing question: Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?
2025-05-08 13:06:48,938 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 13:06:48,939 INFO agent_logger: [AGENT] Received question: 'vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?'
2025-05-08 13:06:48,939 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 13:06:48,940 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 13:06:48,940 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 13:06:48,942 INFO src.tools.summary_checker: No matching summary found
2025-05-08 13:06:48,942 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 13:06:48,942 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 13:06:48,943 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 13:06:48,943 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 13:06:48,943 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 13:06:48,944 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1517433186496; state: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:06:48,944 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1517433186496; state: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:06:48,944 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 13:06:49,825 INFO faiss.loader: Loading faiss with AVX2 support.
2025-05-08 13:06:49,873 INFO faiss.loader: Successfully loaded faiss with AVX2 support.
2025-05-08 13:06:49,885 INFO faiss: Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-08 13:06:49,914 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 13:06:50,009 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 13:06:50,010 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 13:06:50,921 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 13:06:50,922 INFO src.utils.agreement_utils: No agreement detected in query, returning all documents for smart fallback processing
2025-05-08 13:06:50,922 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 13:06:50,923 INFO vector_retriever_logger: No agreement specified in query, using smart fallback
2025-05-08 13:06:50,924 INFO src.utils.agreement_utils: Group 'PA16' contains 3 documents
2025-05-08 13:06:50,924 INFO src.utils.agreement_utils: Group 'SKR2023' contains 2 documents
2025-05-08 13:07:00,081 INFO vector_retriever_logger: Returning response: Jag hittade information om din fr√•ga i flera olika pensionsavtal:

## PA16
Jag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om specifika √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten inneh√•ller inte detaljer om vilka √§ndringar som kommer att g√§lla.

## SKR2023
Jag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om eventuella √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 baserat p√• den tillhandah√•llna kontexten.



<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>
2025-05-08 13:07:00,083 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1517433186496; result: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000016151CD1010>, 'response': 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## PA16\nJag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om specifika √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten inneh√•ller inte detaljer om vilka √§ndringar som kommer att g√§lla.\n\n## SKR2023\nJag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om eventuella √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 baserat p√• den tillhandah√•llna kontexten.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:07:00,084 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 13:07:00,085 INFO main: Final state from LangGraph: {'question': 'Vilka √§ndringar i pensionsutbetalningar kommer att g√§lla fr√•n och med 1 januari 2025?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000016151CD1010>, 'response': 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## PA16\nJag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om specifika √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten inneh√•ller inte detaljer om vilka √§ndringar som kommer att g√§lla.\n\n## SKR2023\nJag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om eventuella √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 baserat p√• den tillhandah√•llna kontexten.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:07:00,086 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 13:07:00,087 INFO main: Cleaned response: Jag hittade information om din fr√•ga i flera olika pensionsavtal:

## PA16
Jag beklagar, men jag har...
2025-05-08 13:07:00,087 INFO main: [chat endpoint] Final response: 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## PA16\nJag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om specifika √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 enligt pensionsavtalet PA16. Kontexten inneh√•ller inte detaljer om vilka √§ndringar som kommer att g√§lla.\n\n## SKR2023\nJag beklagar, men jag har inte tillr√§cklig information f√∂r att besvara din fr√•ga om eventuella √§ndringar i pensionsutbetalningar fr√•n och med 1 januari 2025 baserat p√• den tillhandah√•llna kontexten.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | forhandlingsprotokoll-enskilda-overenskommelser-seko-bilaga3-20231114.pdf | sida 1, 2, 3</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>'
2025-05-08 13:07:32,816 INFO main: Received message: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 13:07:32,817 INFO main: Session ID: ::1
2025-05-08 13:07:32,818 INFO main: Processing message: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 13:07:32,820 INFO src.graph.pension_graph: Processing question: Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?
2025-05-08 13:07:32,820 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 13:07:32,820 INFO agent_logger: [AGENT] Received question: 'vad √§r pa16 och n√§r tr√§der de nya √§ndringarna i kraft?'
2025-05-08 13:07:32,821 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 13:07:32,821 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 13:07:32,821 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 13:07:32,822 INFO src.tools.summary_checker: No matching summary found
2025-05-08 13:07:32,822 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 13:07:32,823 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 13:07:32,823 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 13:07:32,823 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 13:07:32,823 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 13:07:32,824 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1518190167296; state: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:07:32,824 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1518190167296; state: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:07:32,824 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 13:07:33,579 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 13:07:33,668 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 13:07:33,669 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 13:07:34,207 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 13:07:34,208 INFO src.utils.agreement_utils: Filtered 10 documents to 3 for agreement 'PA16'
2025-05-08 13:07:34,208 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 13:07:34,903 INFO src.utils.agreement_utils: Detected agreement 'PA16' in query
2025-05-08 13:07:38,474 INFO vector_retriever_logger: Generated response using LLM with source references
2025-05-08 13:07:38,475 INFO vector_retriever_logger: Returning response: PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].

<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | overenskommelse-om-andringar-i-pa16-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 8 KAP | sida 15, 16</li></ul>
2025-05-08 13:07:38,476 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1518190167296; result: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x000001617AEF8E10>, 'response': 'PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | overenskommelse-om-andringar-i-pa16-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 8 KAP | sida 15, 16</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:07:38,477 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 13:07:38,479 INFO main: Final state from LangGraph: {'question': 'Vad √§r PA16 och n√§r tr√§der de nya √§ndringarna i kraft?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x000001617AEF8E10>, 'response': 'PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | overenskommelse-om-andringar-i-pa16-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 8 KAP | sida 15, 16</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:07:38,480 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 13:07:38,481 INFO main: Cleaned response: PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De ny...
2025-05-08 13:07:38,481 INFO main: [chat endpoint] Final response: 'PA16 √§r ett pensionsavtal, men kontexten ger inte mer specifik information om vad det inneb√§r. De nya √§ndringarna i PA16 tr√§der i kraft den 1 januari 2024, om inget annat framg√•r av protokollet eller tillh√∂rande bilagor [1][2].\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> PA16 | overenskommelse-om-andringar-i-pa16-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li><li><strong>[2]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | sida 1, 2, 3</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 8 KAP | sida 15, 16</li></ul>'
2025-05-08 13:07:54,746 INFO main: Received message: Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?
2025-05-08 13:07:54,746 INFO main: Session ID: ::1
2025-05-08 13:07:54,754 INFO main: Processing message: Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?
2025-05-08 13:07:54,755 INFO src.graph.pension_graph: Processing question: Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?
2025-05-08 13:07:54,756 INFO agent_logger: [AGENT] Start process. State: {'question': 'Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 13:07:54,756 INFO agent_logger: [AGENT] Received question: 'hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?'
2025-05-08 13:07:54,757 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 13:07:54,757 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 13:07:54,757 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 13:07:54,758 INFO src.tools.summary_checker: No matching summary found
2025-05-08 13:07:54,760 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 13:07:54,761 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 13:07:54,761 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 13:07:54,761 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 13:07:54,762 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 13:07:54,762 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1518183595648; state: {'question': 'Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:07:54,763 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1518183595648; state: {'question': 'Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:07:54,764 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 13:07:55,531 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 13:07:55,610 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 13:07:55,611 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 13:07:56,256 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 13:07:56,257 INFO src.utils.agreement_utils: No agreement detected in query, returning all documents for smart fallback processing
2025-05-08 13:07:56,257 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 13:07:56,257 INFO vector_retriever_logger: No agreement specified in query, using smart fallback
2025-05-08 13:07:56,257 INFO src.utils.agreement_utils: Group 'SKR2023' contains 2 documents
2025-05-08 13:07:56,258 INFO src.utils.agreement_utils: Group 'PA16' contains 3 documents
2025-05-08 13:08:09,265 INFO vector_retriever_logger: Returning response: Jag hittade information om din fr√•ga i flera olika pensionsavtal:

## SKR2023
Jag beklagar, men jag har inte tillr√§cklig information i den angivna kontexten f√∂r att besvara din fr√•ga om hur l√§nge en yrkesofficerare kan skjuta upp sin pension enligt √∂verenskommelsen. Kontexten handlar om information om avgiftsbest√§md pension och familjeskydd, men inte om uppskjutande av pension.

## PA16
Enligt kontexten kan en yrkesofficerare skjuta upp sin pension fram till 65 √•r, men endast om det finns en √∂verenskommelse om detta. Efter att denna √∂verenskommelse l√∂pt ut kan pensionsperioden inte skjutas fram ytterligare utan en f√∂rnyad √∂verenskommelse. Om en yrkesofficerare v√§ljer att forts√§tta sin anst√§llning utan en s√•dan √∂verenskommelse, kan de inte ensidigt skjuta fram pensionsuttaget [5]. Det finns ingen specifik tidsgr√§ns angiven f√∂r hur l√§nge pensionen kan skjutas upp.



<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 7 KAP | sida 42, 43</li><li><strong>[4]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 12 KAP | sida 45, 46, 47</li><li><strong>[5]</strong> PA16 | enskild-overenskommelse-om-arbete-med-uppskjuten-pension-bilaga3-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li></ul>
2025-05-08 13:08:09,268 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1518183595648; result: {'question': 'Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000016151D60410>, 'response': 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## SKR2023\nJag beklagar, men jag har inte tillr√§cklig information i den angivna kontexten f√∂r att besvara din fr√•ga om hur l√§nge en yrkesofficerare kan skjuta upp sin pension enligt √∂verenskommelsen. Kontexten handlar om information om avgiftsbest√§md pension och familjeskydd, men inte om uppskjutande av pension.\n\n## PA16\nEnligt kontexten kan en yrkesofficerare skjuta upp sin pension fram till 65 √•r, men endast om det finns en √∂verenskommelse om detta. Efter att denna √∂verenskommelse l√∂pt ut kan pensionsperioden inte skjutas fram ytterligare utan en f√∂rnyad √∂verenskommelse. Om en yrkesofficerare v√§ljer att forts√§tta sin anst√§llning utan en s√•dan √∂verenskommelse, kan de inte ensidigt skjuta fram pensionsuttaget [5]. Det finns ingen specifik tidsgr√§ns angiven f√∂r hur l√§nge pensionen kan skjutas upp.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 7 KAP | sida 42, 43</li><li><strong>[4]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 12 KAP | sida 45, 46, 47</li><li><strong>[5]</strong> PA16 | enskild-overenskommelse-om-arbete-med-uppskjuten-pension-bilaga3-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:08:09,270 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 13:08:09,271 INFO main: Final state from LangGraph: {'question': 'Hur l√§nge kan en yrkesofficerare skjuta upp sin pension enligt √∂verenskommelsen?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000016151D60410>, 'response': 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## SKR2023\nJag beklagar, men jag har inte tillr√§cklig information i den angivna kontexten f√∂r att besvara din fr√•ga om hur l√§nge en yrkesofficerare kan skjuta upp sin pension enligt √∂verenskommelsen. Kontexten handlar om information om avgiftsbest√§md pension och familjeskydd, men inte om uppskjutande av pension.\n\n## PA16\nEnligt kontexten kan en yrkesofficerare skjuta upp sin pension fram till 65 √•r, men endast om det finns en √∂verenskommelse om detta. Efter att denna √∂verenskommelse l√∂pt ut kan pensionsperioden inte skjutas fram ytterligare utan en f√∂rnyad √∂verenskommelse. Om en yrkesofficerare v√§ljer att forts√§tta sin anst√§llning utan en s√•dan √∂verenskommelse, kan de inte ensidigt skjuta fram pensionsuttaget [5]. Det finns ingen specifik tidsgr√§ns angiven f√∂r hur l√§nge pensionen kan skjutas upp.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 7 KAP | sida 42, 43</li><li><strong>[4]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 12 KAP | sida 45, 46, 47</li><li><strong>[5]</strong> PA16 | enskild-overenskommelse-om-arbete-med-uppskjuten-pension-bilaga3-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:08:09,273 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 13:08:09,273 INFO main: Cleaned response: Jag hittade information om din fr√•ga i flera olika pensionsavtal:

## SKR2023
Jag beklagar, men jag ...
2025-05-08 13:08:09,274 INFO main: [chat endpoint] Final response: 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## SKR2023\nJag beklagar, men jag har inte tillr√§cklig information i den angivna kontexten f√∂r att besvara din fr√•ga om hur l√§nge en yrkesofficerare kan skjuta upp sin pension enligt √∂verenskommelsen. Kontexten handlar om information om avgiftsbest√§md pension och familjeskydd, men inte om uppskjutande av pension.\n\n## PA16\nEnligt kontexten kan en yrkesofficerare skjuta upp sin pension fram till 65 √•r, men endast om det finns en √∂verenskommelse om detta. Efter att denna √∂verenskommelse l√∂pt ut kan pensionsperioden inte skjutas fram ytterligare utan en f√∂rnyad √∂verenskommelse. Om en yrkesofficerare v√§ljer att forts√§tta sin anst√§llning utan en s√•dan √∂verenskommelse, kan de inte ensidigt skjuta fram pensionsuttaget [5]. Det finns ingen specifik tidsgr√§ns angiven f√∂r hur l√§nge pensionen kan skjutas upp.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 7 KAP | sida 42, 43</li><li><strong>[4]</strong> PA16 | pa16-pensionsavtal-bilaga1-20231231.pdf | 12 KAP | sida 45, 46, 47</li><li><strong>[5]</strong> PA16 | enskild-overenskommelse-om-arbete-med-uppskjuten-pension-bilaga3-forhandlingsprotokoll-20230505.pdf | sida 1, 2, 3</li></ul>'
2025-05-08 13:08:39,425 INFO main: Received message: Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?
2025-05-08 13:08:39,425 INFO main: Session ID: ::1
2025-05-08 13:08:39,427 INFO main: Processing message: Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?
2025-05-08 13:08:39,429 INFO src.graph.pension_graph: Processing question: Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?
2025-05-08 13:08:39,429 INFO agent_logger: [AGENT] Start process. State: {'question': 'Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...'}
2025-05-08 13:08:39,430 INFO agent_logger: [AGENT] Received question: 'vad st√•r akap-kr f√∂r och n√§r b√∂rjade avtalet g√§lla?'
2025-05-08 13:08:39,430 INFO agent_logger: [AGENT] Trying tool: CalculatorTool
2025-05-08 13:08:39,430 INFO agent_logger: [AGENT] Tool CalculatorTool.can_handle returned: False
2025-05-08 13:08:39,430 INFO agent_logger: [AGENT] Trying tool: SummaryCheckerTool
2025-05-08 13:08:39,431 INFO src.tools.summary_checker: No matching summary found
2025-05-08 13:08:39,432 INFO agent_logger: [AGENT] Tool SummaryCheckerTool.can_handle returned: False
2025-05-08 13:08:39,432 INFO agent_logger: [AGENT] Trying tool: VectorRetrieverTool
2025-05-08 13:08:39,432 INFO agent_logger: [AGENT] Tool VectorRetrieverTool.can_handle returned: True
2025-05-08 13:08:39,432 INFO agent_logger: [AGENT] Selected tool: VectorRetrieverTool
2025-05-08 13:08:39,432 INFO agent_logger: [AGENT] Running tool VectorRetrieverTool with standard execution (no parameter extraction)
2025-05-08 13:08:39,433 INFO agent_logger: [AGENT] [NON-CALC] Try block START. state id: 1518186213888; state: {'question': 'Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:08:39,433 INFO agent_logger: [AGENT] [NON-CALC] Before tool run. state id: 1518186213888; state: {'question': 'Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool'}
2025-05-08 13:08:39,433 INFO vector_retriever_logger: Running vector retriever tool
2025-05-08 13:08:40,228 INFO src.retriever.retriever_tool: ‚úÖ Vectorstore loaded successfully
2025-05-08 13:08:40,316 INFO src.retriever.retriever_tool: Loaded 1455 documents for BM25 search
2025-05-08 13:08:40,317 INFO src.retriever.retriever_tool: ‚úÖ BM25 retriever initialized successfully
2025-05-08 13:08:40,858 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 13:08:40,858 INFO src.utils.agreement_utils: No agreement detected in query, returning all documents for smart fallback processing
2025-05-08 13:08:40,859 INFO src.utils.agreement_utils: No agreement detected in query, defaulting to PA16
2025-05-08 13:08:40,859 INFO vector_retriever_logger: No agreement specified in query, using smart fallback
2025-05-08 13:08:40,859 INFO src.utils.agreement_utils: Group 'SKR2023' contains 5 documents
2025-05-08 13:08:46,160 INFO vector_retriever_logger: Returning response: Jag hittade information om din fr√•ga i flera olika pensionsavtal:

## SKR2023
"AKAP-KR" st√•r f√∂r Avgiftsbest√§md KollektivAvtalad Pension och √§r det vid var tid g√§llande kommunala tj√§nstepensionsavtalet. Det hette tidigare AKAP-KL [3]. Kontexten ger dock ingen information om n√§r avtalet b√∂rjade g√§lla.



<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>
2025-05-08 13:08:46,164 INFO agent_logger: [AGENT] [NON-CALC] After tool run. result id: 1518186213888; result: {'question': 'Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?', 'user_language': 'sv', 'conversation_history': [], 'status': 'üîç Bearbetar fr√•gan...', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000016151DFC640>, 'response': 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## SKR2023\n"AKAP-KR" st√•r f√∂r Avgiftsbest√§md KollektivAvtalad Pension och √§r det vid var tid g√§llande kommunala tj√§nstepensionsavtalet. Det hette tidigare AKAP-KL [3]. Kontexten ger dock ingen information om n√§r avtalet b√∂rjade g√§lla.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:08:46,166 INFO agent_logger: [AGENT] [NON-CALC] Try block END. Returning result.
2025-05-08 13:08:46,170 INFO main: Final state from LangGraph: {'question': 'Vad st√•r AKAP-KR f√∂r och n√§r b√∂rjade avtalet g√§lla?', 'user_language': 'sv', 'conversation_history': [], 'status': '‚úÖ Klar', 'followup_count': 0, 'active_tool': 'VectorRetrieverTool', 'retriever': <src.retriever.retriever_tool.RetrieverTool object at 0x0000016151DFC640>, 'response': 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## SKR2023\n"AKAP-KR" st√•r f√∂r Avgiftsbest√§md KollektivAvtalad Pension och √§r det vid var tid g√§llande kommunala tj√§nstepensionsavtalet. Det hette tidigare AKAP-KL [3]. Kontexten ger dock ingen information om n√§r avtalet b√∂rjade g√§lla.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>', 'response_source': 'vector_db'}
2025-05-08 13:08:46,173 INFO main: [DEBUG] state keys: ['question', 'user_language', 'conversation_history', 'status', 'followup_count', 'active_tool', 'retriever', 'response', 'response_source']
2025-05-08 13:08:46,174 INFO main: Cleaned response: Jag hittade information om din fr√•ga i flera olika pensionsavtal:

## SKR2023
"AKAP-KR" st√•r f√∂r Avg...
2025-05-08 13:08:46,176 INFO main: [chat endpoint] Final response: 'Jag hittade information om din fr√•ga i flera olika pensionsavtal:\n\n## SKR2023\n"AKAP-KR" st√•r f√∂r Avgiftsbest√§md KollektivAvtalad Pension och √§r det vid var tid g√§llande kommunala tj√§nstepensionsavtalet. Det hette tidigare AKAP-KL [3]. Kontexten ger dock ingen information om n√§r avtalet b√∂rjade g√§lla.\n\n\n\n<p><strong>K√§llor:</strong></p><ul><li><strong>[1]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[2]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[3]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[4]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li><li><strong>[5]</strong> SKR2023 | SKR2023 Tryckversion AKAP-KR i lydelse 2023-01-01 474115_1_1_siwen.pdf | sida 1, 3, 5</li></ul>'
2025-05-08 13:21:06,442 INFO main:  Shutting down system...
